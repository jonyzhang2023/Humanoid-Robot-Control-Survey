# Skill: 深度行业调研 v2.0

> 基于「世界模型」完整调研项目实战经验提炼，兼容原 v1.0 流程并做了大幅强化。

## 目标

针对一个技术领域/行业方向，生成一份**单文件、可持续更新**的深度调研报告。报告应覆盖概念、历史、技术路线、主要玩家、开源生态、前沿趋势等维度，并对每个子方向提供**论文级深度解析**。

## 设计原则

| 原则 | 说明 |
|------|------|
| 单文件自包含 | 一份 Markdown 文件即为完整报告，无需外部依赖 |
| 可增量更新 | 通过更新标记（`<!-- 更新标记 -->`）和版本控制块支持按月迭代 |
| 深度优先于广度 | 每个方向有 2–4 篇**深度解析**（含架构表、公式、成果数字），而非仅列表 |
| 中文为主，术语保留英文 | 正文用中文；论文名、模型名、方法名保留英文原文 |
| 全链接可溯源 | 每篇论文带 arXiv/官方链接；每个项目带 GitHub 链接 + ⭐ star 数 |

---

## 整体流程（七轮）

```
第一轮：并行深度调研（subagent 集群）
第二轮：搭骨架 → 第三轮：逐节填充 → 第四轮：补链接与最新工作
第五轮：多源合并（如有第二份报告）
第六轮：数据校验与去重
第七轮：深挖子方向（按需）
```

### 流程决策树

```
用户给出主题
  │
  ├─→ 是否已有现成报告？
  │     ├─ 否 → 第一轮（从零调研）
  │     └─ 是 → 跳到第五轮（合并流程）
  │
  ├─→ 第一轮完成 → 第二轮（搭骨架）
  ├─→ 第三轮（逐节填充，最核心步骤）
  ├─→ 第四轮（补链接、补最新工作）
  ├─→ 是否有第二份/外部数据源要合并？
  │     ├─ 否 → 第六轮
  │     └─ 是 → 第五轮 → 第六轮
  ├─→ 第六轮（校验）
  └─→ 用户要求深挖某方向 → 第七轮
```

---

## 第一轮：并行深度调研

### 目标
用多个 subagent **并行**收集该领域的全面信息，而非逐个串行搜索。

### 调研维度（建议 4–6 个 subagent 并行）

| Subagent | 任务 | 期望返回 |
|----------|------|---------|
| **A：奠基论文** | 搜索该领域的经典奠基工作（>100 引用），覆盖到当月 | 每篇：标题、作者、年份、arXiv ID、一句话贡献、引用数量级 |
| **B：近期论文**（最近 6 月） | 搜索 arXiv 上最近 6 个月的论文，按方向分类 | 每篇：标题、日期、机构、arXiv ID、一句话贡献、所属方向 |
| **C：综述论文** | 搜索该领域的 survey/review 论文 | 每篇：标题、日期、覆盖范围、arXiv ID |
| **D：企业与机构** | 搜索科技巨头和学术机构的布局 | 每个机构：名称、关键产品/论文、战略定位 |
| **E：开源项目** | 搜索 GitHub 上的核心仓库 | 每个：名称、URL、⭐ 数、一句话描述、最新活跃时间 |
| **F：中国团队**（如适用） | 专门搜索中国机构的贡献 | 每个团队：机构名、代表工作列表、研究方向 |

### Subagent Prompt 模板

```
请对「{主题}」领域进行深度搜索，覆盖以下内容：
1. {具体任务描述}
2. 时间范围：{起始年份} 至 {当前月份}
3. 请返回结构化数据，格式如下：
   - 论文：标题 | 作者 | 年份 | arXiv ID | 机构 | 一句话核心贡献
   - 项目：名称 | GitHub URL | ⭐ 数 | 描述
4. 已有论文列表（避免重复）：{已有列表}
5. 重点关注：{特定关键词/方向}

注意：这是一个纯搜索任务，不需要写代码。请尽可能全面，宁多勿少。
```

### 操作要点
- subagent 之间**无依赖关系**，可完全并行
- 每个 subagent 的 prompt 中明确列出已有数据（避免重复）
- subagent 返回后，先做去重合并，再进入第二轮

---

## 第二轮：搭建报告骨架

### 目标
创建完整的文件骨架（只有标题、TOC、版本块、空节），**不填充内容**。骨架一旦确定，后续所有工作都是在骨架上增量填充。

### 骨架结构

```markdown
# {主题} 完整研究报告

> **版本**：v1.0 · **更新日期**：YYYY 年 MM 月 DD 日
> **覆盖范围**：{起始年份}–{当前年月} · **收录论文**：~{N} 篇
> **更新频率**：每月一次 · **下次计划更新**：YYYY 年 MM 月
> **数据来源**：arXiv、顶会论文、Nature、GitHub、企业技术博客

---

## 目录
（完整的超链接目录）

---

<!-- 第一部分：认知建立 -->
## 一、执行摘要
## 二、核心定义
## 三、发展历程与里程碑时间线

<!-- 第二部分：N 个研究方向 -->
## 四、方向一：{名称}
## 五、方向二：{名称}
...

<!-- 第三部分：生态与产业 -->
## {N+3}、全球企业与机构布局
## {N+4}、开源生态全景

<!-- 第四部分：分析与展望 -->
## {N+5}、技术路线对比分析
## {N+6}、评估基准景观
## {N+7}、关键趋势与未来展望
## {N+8}、结论

<!-- 附录 -->
## 附录：论文与参考文献总索引
```

### 版本控制块（必须包含）

```markdown
> **版本**：v1.0 · **更新日期**：YYYY 年 MM 月 DD 日
> **覆盖范围**：{起始}–{当前} · **收录论文**：~N 篇
> **更新频率**：每月一次 · **下次计划更新**：YYYY 年 MM 月
> **数据来源**：arXiv、顶会论文、Nature、GitHub、企业技术博客
```

### 每节更新标记（插在每个主要节末尾）

```html
<!-- 更新标记：{节名} 最后更新 YYYY.MM -->
```

---

## 第三轮：逐节填充（核心步骤）

### 填充顺序

```
Step 0: 骨架（第二轮已完成）
Step 1-N: 逐个方向填充（每个方向一个 Step）
Step N+1: 企业与机构布局
Step N+2: 开源生态全景
Step N+3: 技术路线对比分析
Step N+4: 评估基准景观
Step N+5: 关键趋势与未来展望
Step N+6: 结论
Step N+7: 附录
Step N+8: 执行摘要（最后写，因为需要全文信息）
```

> **注意**：执行摘要最后写，因为它是全文的浓缩，需要先有全部内容。

### 每个研究方向的标准模板

```markdown
## {编号}、方向{N}：{方向名称}

### {N}.1 方向概述

{2-3 段介绍：核心思想、为什么重要、与其他方向的关系}

### {N}.2 关键论文深度解析

#### {N}.2.1 {论文名} — {一句话定位}

| 项目 | 内容 |
|------|------|
| **论文** | [{论文全名}]({arXiv链接}) |
| **作者** | {作者列表} |
| **发表** | {会议/期刊} {年份} |
| **代码** | [github.com/{repo}](链接)（{⭐} ⭐） |

**核心方法：** {2-3 段技术细节}

**架构/关键组件表格：**

| 组件 | 模型 | 功能 | 参数量 |
|------|------|------|--------|
| ... | ... | ... | ... |

**成果**：{量化结果，如"XXX 任务 SOTA，提升 XX%"}

#### {N}.2.2 {系列工作对比}（如 Dreamer V1→V4）

| 版本 | 年份 | 关键改进 | 重要成果 |
|------|------|---------|---------|
| V1 | ... | ... | ... |
| V2 | ... | ... | ... |
| ... | ... | ... | ... |

{系列工作的演进分析文字}

### {N}.3 前沿论文全景

| 论文 | 机构/时间 | 核心贡献 | 链接 |
|------|----------|---------|------|
| [**重要论文加粗**](链接) | ... | ... | [arXiv](链接) |
| [普通论文](链接) | ... | ... | [arXiv](链接) |
| ... | ... | ... | ... |

<!-- 更新标记：方向{N} 最后更新 YYYY.MM -->

### {N}.4 方向小结

| 特征 | 描述 |
|------|------|
| **优势** | ... |
| **局限** | ... |
| **趋势** | ... |
| **代表方法** | ... |
```

### 模板使用要点

1. **深度解析**（N.2）：每个方向选 2–4 篇最重要的论文做深度拆解，包含架构表、公式（KaTeX）、量化成果
2. **系列对比**：如果该方向有迭代系列（如 Dreamer V1→V4、Sora 1→2、GAIA-1→3），必须有对比表
3. **全景表**（N.3）：覆盖该方向所有重要论文（通常 10–25 篇），**加粗**标记最重要的
4. **方向小结**（N.4）：四维度卡片（优势/局限/趋势/代表方法），便于快速扫描

### 其他节模板

#### 执行摘要
```markdown
## 一、执行摘要

{一段总论}

**截至 {当前日期}，{主题}研究已经历 N 次范式跃迁：**

| 阶段 | 时间 | 代表工作 | 核心特征 |
|------|------|---------|---------|
| 1.0 | ... | ... | ... |
| 2.0 | ... | ... | ... |
| 3.0 | ... | ... | ... |

**N 大标志性事件定义了当前格局：**
1. **{事件1}**：...
2. **{事件2}**：...
...

**当前最活跃的交叉前沿：**
1. **{方向} × {方向}** → {结果}
...
```

#### 时间线
```markdown
## 三、发展历程与里程碑时间线

| 时间 | 里程碑 | 机构/作者 | 核心贡献 |
|------|--------|----------|---------|
| {年份} | [{名称}](链接) ⭐ | {机构} | {贡献} |
| ... | ... | ... | ... |

> ⭐ 标记的为范式转换级别的里程碑。
```

#### 企业布局
```markdown
### 科技巨头

| 企业 | 关键产品/模型 | 战略定位 | 最新动向 |
|------|-------------|---------|---------|
| ... | ... | ... | ... |

### 学术机构

| 机构 | 代表工作 | 主攻方向 |
|------|---------|---------|
| ... | ... | ... |
```

#### 开源生态
```markdown
### 核心开源项目

| 项目 | 机构 | ⭐ Stars | 许可 | 核心特色 | 链接 |
|------|------|---------|------|---------|------|
| ... | ... | ... | ... | ... | [GitHub](链接) |

### 生态上游/基础设施

| 项目 | ⭐ Stars | 用途 | 链接 |
|------|---------|------|------|
| ... | ... | ... | [GitHub](链接) |
```

#### 技术路线对比
```markdown
### 范式对比表

| 维度 | 方案A | 方案B | 方案C |
|------|------|------|------|
| 核心思想 | ... | ... | ... |
| 预测空间 | ... | ... | ... |
| 优势 | ... | ... | ... |
| 局限 | ... | ... | ... |

### 架构演进路径（ASCII 图）

{用 ASCII 图或文字展示技术路线树}
```

#### 附录

```markdown
## 附录：论文与参考文献总索引

### 一、研究论文索引

| # | 论文 | 时间 | 方向 | 机构 | 链接 |
|---|------|------|------|------|------|
| 1 | ... | ... | D1 | ... | [arXiv](链接) |
| ... | ... | ... | ... | ... | ... |

### 二、综述论文索引

| # | 综述标题 | 时间 | 覆盖范围 | 链接 |
|---|---------|------|---------|------|
| 1 | ... | ... | ... | [arXiv](链接) |

### 三、核心参考文献（标准引用格式）

1. Author, A., & Author, B. (Year). Title. *Journal/arXiv:XXXX.XXXXX*. [Link](url)
2. ...
```

---

## 第四轮：补链接与最新工作

### 4.1 补链接
第三轮生成的内容中，部分论文可能缺少 arXiv 链接。逐一补充：

- 用 `fetch_webpage` 或 subagent 查找每篇论文的 arXiv ID
- 格式统一为 `[论文名](https://arxiv.org/abs/XXXX.XXXXX)`
- 非 arXiv 论文用官方链接（如 OpenAI blog、DeepMind blog、Nature）
- **批量处理**：每次给 subagent 5–10 个待查论文，避免逐个串行

### 4.2 补最新版本（系列工作迭代）
检查报告中的产品/模型是否有更新版本：

```
检查清单示例：
- Sora 1 → Sora 2？
- Genie 1 → 2 → 3？
- DreamerV1 → V2 → V3 → V4？
- GAIA-1 → 2 → 3？
- V-JEPA → V-JEPA 2 → V-JEPA 2-AC？
- Cosmos → Transfer1 → Reason1 → Predict 2.5？
```

### 4.3 补开源项目
- 搜索 GitHub 上相关的重要仓库
- 用 `fetch_webpage` 抓取 star 数
- **分批处理**（每批 5–8 个 URL），避免遗漏

### 4.4 补近期论文（最近 1–2 月）
如果领域近期论文密集：

```
搜索策略：
1. arXiv 搜索：fetch_webpage("arxiv.org/search/?query={关键词}&order=-announced_date_first&start={0,25,50,75,100}")
2. 按方向分类整理
3. 筛选标准：顶会/知名机构/高影响力/新方向
4. 整合到对应方向的全景表中
```

---

## 第五轮：多源合并（如有外部数据源）

当存在第二份报告或外部数据源时使用此流程。

### 5.1 差异分析

用 subagent 做两份报告的系统对比：

```
Subagent Prompt：
请比较以下两份报告的内容差异：
- 报告 A：{文件路径}
- 报告 B：{文件路径}

请返回：
1. 仅 A 有的论文列表
2. 仅 B 有的论文列表
3. 两者都有但信息不一致的条目
4. B 中值得合并到 A 的内容
5. 结构性差异分析
```

### 5.2 合并决策检查点

在正式合并前，与用户确认以下 **关键设计决策**：

| 决策项 | 选项 | 说明 |
|--------|------|------|
| 文件策略 | 新建文件 / 原地编辑 | 建议新建 + 归档旧文件 |
| 语言 | 中文 / 英文 / 双语 | — |
| 系列作品处理 | 单独对比子节 / 分散在各处 | 建议在该方向 N.2 中单独对比 |
| 链接策略 | 全链接 / 仅重点 | 建议全链接 |
| 版本控制 | 有/无 | 建议有 |

### 5.3 执行合并

```
合并原则：
1. 以结构更完整的报告为骨架
2. 逐方向合并论文（去重 + 补充）
3. 保留两份报告中更详细的描述
4. 新增论文插入到对应方向的全景表中
5. 更新执行摘要中的统计数字
6. 更新版本控制块
```

---

## 第六轮：数据校验

### 6.1 校验清单

| 检查项 | 常见问题 | 检查方法 |
|--------|---------|---------|
| 年份/日期 | arXiv ID 与标注年份不一致（如 2010.02193 是 2020 年而非 2021） | `grep_search` 搜索年份模式 |
| arXiv 链接 | 链接 404、ID 与论文标题不匹配 | `fetch_webpage` 批量验证 |
| GitHub star 数 | 仓库不存在或已改名 | `fetch_webpage` 批量验证 |
| 重复内容 | 同一论文在全景表和附录中信息不一致 | `grep_search` 搜索论文名 |
| 遗漏条目 | 编辑过程中意外删除的行 | 通读 + `wc -l` 检查行数变化 |
| 章节编号 | 插入新章节后编号未连续 | 通读目录 |
| 更新标记 | 遗漏的 `<!-- 更新标记 -->` | `grep_search` 检查 |
| 链接格式 | `[text](url)` 格式不统一 | `grep_search` 用正则 `\[.*\]\(.*\)` |

### 6.2 校验流程

```
1. wc -l 检查总行数（是否有意外丢失）
2. grep_search 所有 "更新标记" 确认覆盖
3. grep_search 所有 arXiv 链接格式一致性
4. 分批 fetch_webpage 验证前 20 个链接
5. 通读目录，检查编号连续性
6. 搜索常见错误模式："TODO"、"TBD"、"xxx"、"待补充"
```

---

## 第七轮：子方向深挖（按需）

当用户要求对某个子方向深入研究时，在报告中扩展该方向的内容。

### 深挖模板

```markdown
#### {N}.2.{M} {专题名称} — 深度分析

**技术架构全景**

{分类法描述 + ASCII 图}

**范式对比**

| 维度 | 范式A | 范式B | 范式C |
|------|------|------|------|
| 核心思想 | ... | ... | ... |
| 数据需求 | ... | ... | ... |
| 推理速度 | ... | ... | ... |
| 代表工作 | ... | ... | ... |

**量化指标对比**

| 工作 | 模型参数 | 训练数据 | {任务指标} | 推理速度 |
|------|---------|---------|-----------|---------|
| ... | ... | ... | ... | ... |

**补充论文索引**

| 论文 | 时间 | 核心贡献 | 链接 |
|------|------|---------|------|
| ... | ... | ... | ... |

**核心挑战**

| 挑战 | 当前进展 | 仍存差距 |
|------|---------|---------|
| ... | ... | ... |
```

### 操作要点
- 先读取现有报告中该方向的内容（`read_file`），避免重复
- 重点补充：架构分类学、范式对比、数据流图、量化指标
- 标注各工作的关键数字（性能提升百分比、模型参数量、推理速度等）

---

## 增量更新协议

当需要月度更新时，按以下流程操作：

### 步骤

```
1. 搜索 arXiv 最近 1 个月的新论文
2. 搜索 GitHub 项目的最新 star 数
3. 将新论文插入到对应方向的全景表
4. 更新执行摘要中的统计数字
5. 更新版本控制块的日期和论文数
6. 更新对应节的 <!-- 更新标记 -->
7. 如有重大事件（如新产品发布），更新时间线和执行摘要
```

### 更新标记约定

```html
<!-- 更新标记：{节名} 最后更新 YYYY.MM -->
```

每次更新时只修改被影响的节的标记，未修改的节保持原标记。这样可以快速看出哪些节需要更新。

---

## 工具使用模式

| 阶段 | 主要工具 | 用法 |
|------|---------|------|
| 并行调研 | `runSubagent` × 4–6 | 多个 subagent 同时搜索不同维度 |
| 搜索论文 | `fetch_webpage` | 搜索 arXiv（`arxiv.org/search/`） |
| 验证链接 | `fetch_webpage` | 批量验证 arXiv ID、GitHub 仓库 |
| 获取 star | `fetch_webpage` | 批量抓取 GitHub star 数（每批 5–8 个） |
| 创建文件 | `create_file` | 创建骨架（仅第一次） |
| 增量编辑 | `replace_string_in_file` | 填充单个节 |
| 批量编辑 | `multi_replace_string_in_file` | 同时修复多处问题 |
| 审阅 | `read_file` + `grep_search` | 全文通读 + 搜索特定模式 |
| 行数检查 | `run_in_terminal`（`wc -l`） | 验证编辑前后行数 |
| 归档 | `run_in_terminal`（`mkdir -p archive && mv`） | 归档旧文件 |

### Subagent Prompt 设计原则

```
1. 明确角色：「你是一个学术论文搜索助手」
2. 明确任务：「请搜索 {领域} 的 {具体内容}」
3. 明确范围：「时间范围 {from}–{to}」
4. 明确已有数据：「以下论文已收录，请勿重复：{列表}」
5. 明确返回格式：「请按以下格式返回：{模板}」
6. 声明纯搜索：「这是纯搜索任务，不需要写代码」
```

---

## 质量标准

### 必须达到

- [ ] 所有论文都有 arXiv 或官方链接
- [ ] 所有开源项目都有 GitHub 链接和 ⭐ star 数
- [ ] 时间线覆盖从学术起源到当月
- [ ] 每个方向都有 2–4 篇**深度解析**（含架构表、成果数字）
- [ ] 每个方向都有**全景表**（10–25 篇）
- [ ] 每个方向都有**方向小结卡片**（优势/局限/趋势/代表方法）
- [ ] 系列工作（如 V1→V2→V3）有**对比表**
- [ ] 每节末尾有 `<!-- 更新标记 -->`
- [ ] 文件顶部有版本控制块
- [ ] 重要工作用 **加粗** 标记
- [ ] 技术路线有对比表或 ASCII 图
- [ ] 执行摘要有范式跃迁表 + 标志性事件 + 交叉前沿
- [ ] 结论部分有带链接的关键发现列表

### 建议达到

- [ ] 最近 1–2 个月的论文有专门覆盖
- [ ] 中国团队的贡献分布在各方向中（而非单独章节）
- [ ] 附录有三部分：研究论文索引 + 综述索引 + 标准引用格式
- [ ] 日期、arXiv ID、链接经过交叉校验
- [ ] 总结部分有带链接的交叉前沿列表

---

## 常见陷阱与应对

| 陷阱 | 应对策略 |
|------|---------|
| 论文数量爆炸，无法全覆盖 | 按影响力分层：深度解析 2–4 篇，全景表 10–25 篇，附录索引 all |
| arXiv ID 格式混淆（`YYMM.NNNNN`） | `YYMM` 中的 `YY` 是年份后两位，`MM` 是月份；2010.xxxxx = 2020年10月 |
| 编辑中丢失内容 | 每次大编辑前 `wc -l` 记录行数，编辑后再次检查 |
| 方向分类重叠（一篇论文属于多个方向） | 在全景表和附录中标注多方向（如 D1/D7），正文只在主方向深度解析 |
| 中文/英文混排格式不统一 | 中英文之间加空格；论文名始终英文；术语首次出现时「中文（English）」 |
| 报告过长导致编辑困难 | 用 `grep_search` 定位 + `replace_string_in_file` 精准编辑，避免全文重写 |

---

## 示例：已完成的项目

- **世界模型（World Model）完整研究报告**
  - 18 个主要章节 + 1 个统一附录
  - 9 个研究方向，每个方向含深度解析 + 全景表 + 小结卡片
  - ~210 篇论文，1386 行 Markdown
  - 版本控制 + 更新标记 + 全链接
  - 文件：`世界模型完整研究报告.md`
